.. _box:

Box
===

.. cpp:class:: Box

  Located in :boxlib:`Src/C_BaseLib/Box.H` and
  :boxlib:`Src/C_BaseLib/Box.cpp`.

  A ``Box`` is an abstraction for defining discrete regions of
  :c:macro:`BL_SPACEDIM`\ -dimensional indexing space.  ``Box``\ es
  have an :cpp:class:`IndexType`, which defines ``IndexType::CELL`` or
  ``IndexType::NODE`` based points for each direction and a low and
  high :cpp:class:`IntVect` which defines the lower and upper corners
  of the ``Box``.  ``Box``\ es can exist in positive and negative
  indexing space.

  **Constructors and copy assignment operator**

    .. cpp:function:: Box()

      The default constructor constructs an empty ``Box``.

    .. cpp:function:: Box (const IntVect& small, const IntVect& big)

      Constructs a cell-centered ``Box`` with specified lower and
      upper corners.

    .. cpp:function:: Box (const IntVect& small, const int* vec_len)

      Constructs a cell-centered ``Box`` with specified lower corner
      and lengths.

    .. cpp:function:: Box (const IntVect& small, const IntVect& big,\
                           const IntVect& typ)


       Constructs a ``Box`` with given index type ``typ`` (represented
       by ``IntVect``) and lower and upper corners.

    .. cpp:function:: Box (const IntVect& small, const IntVect& big,\
                           IndexType t)

       Constructs a ``Box`` with given index type ``t`` and lower
       and upper corners.

    The copy constructor and copy assignment operator are
    auto-generated by the compiler.

  **Destructor**

    The destructor is auto-generated by the compiler.

  **Member functions**

    .. cpp:function:: const IntVect& smallEnd () const

      Returns the small end of the ``Box``.

    .. cpp:function:: int smallEnd (int dir) const

      Returns the coordinate of the low end in the given direction.

    .. cpp:function:: const IntVect& bigEnd () const

      Returns the big end of the ``Box``.

    .. cpp:function:: int bigEnd (int dir) const

      Returns the coordinate of the big end in the given direction.

    .. cpp:function:: int operator[] (Orientation face) const

      Returns the coordinate normal to given face.

    .. cpp:function:: IndexType ixType() const
                      IntVect type() const

      Returns the indexing type.

    .. cpp:function:: IndexType::CellIndex type (int dir) const

      Returns the indexing type in the specified direction.

    .. cpp:function:: IntVect size() const

      Returns the length of the Box.

    .. cpp:function:: int length (int dir) const

      Returns the length of the ``Box`` in the specified direction.

    .. cpp:function:: const int* loVect () const
                      const int* loVect () const

      Returns a ``const`` pointer to the array of low or high end
      coordinates of the Box.  Useful for :ref:`calls to Fortran
      <fortran>`.

    .. cpp:function:: bool isEmpty() const

      Returns true if the ``Box`` is empty.

    .. cpp:function:: bool ok() const

      Returns true if the ``Box`` is valid (including valid index
      type).

      .. note::

        A call to ``ok()`` by an empty Box returns ``false``.

    .. cpp:function:: bool cellCentered () const

      Returns true if ``Box`` is cell-centered in all directions.

    .. cpp:function:: long numPts() const
                      double d_numPts() const

      Returns the number of points in the ``Box``.

    .. cpp:function:: long volume () const

      Returns the volume, in indexing space, of region enclosed by
      this ``Box``.  This is identical to ``numPts()`` for
      cell-centered ``Box``\ e; otherwise, ``numPts() > volume()``.
      For example::

	Box bx(IntVect(D_DECL(0,0,0)), IntVect(D_DECL(4,4,4)),
               IndexType::TheNodeType());
        std::cout << bx.numPts() << "\n"; // 5 x 5 x 5 = 125 in 3D
        std::cout << bx.volume() << "\n"; // 4 x 4 x 4 = 64 in 3D

    .. cpp:function:: int longside () const
                      int longside (int& dir) const

      Returns the length of the longest side.  The argument ``dir``,
      if provided, is modified to give direction with the longest
      side.

    .. cpp:function:: int shortside () const
                      int shortside (int& dir) const

      Returns the length of the shortest side.  The argument ``dir``,
      if provided, is modified to give direction with the shorest
      side.

    .. cpp:function:: long index (const IntVect& v) const

      Returns offset of the point represented by ``IntVect`` from the
      small end of ``Box``, assuming column-major order as in
      Fortran.

    .. cpp:function:: Box& setSmall (const IntVect& sm)

      Redefines the small end of ``Box`` to ``IntVect sm``.

    .. cpp:function:: Box& setSmall (int dir, int sm_index)

      Redefines the small end of ``Box`` at direction ``dir`` to
      ``sm_index``.

    .. cpp:function:: Box& setBig (const IntVect& bg)

      Redefines the big end of ``Box`` to ``IntVect bg``.

    .. cpp:function:: Box& setBig (int dir, int bg_index)

      Redefines the big end of ``Box`` at direction ``dir`` to
      ``bg_index``.

    .. cpp:function:: Box& setRange (int dir, int sm_index, int n_cells = 1)

      Set the range in direction ``dir``, starting at ``sm_index``
      with length ``n_cells``.

    .. cpp:function:: Box& shift (int dir, int nzones)

      Shifts ``Box`` in direction ``dir`` by ``nzones`` indexing
      positions. 

    .. cpp:function:: Box& shift (const IntVect& iv)

      Shifts ``Box`` by ``IntVect iv``.

    .. cpp:function:: Box& convert (IndexType typ)
                      Box& convert (const IntVect& typ)

      Converts ``Box`` from the current type into the argument type.
      The ``volume`` of ``Box`` does not change, whereas the
      ``length`` and the number of points may change.  See also,
      functions ``volume`` and ``numPts``.

    .. cpp:function:: bool contains (const IntVect& p) const
                      bool stictly_contains (const IntVect& p) const

      Returns true if the coordinates denoted by the argument is
      contained or strictly contained within ``Box``.  A point/cell on
      the borders of the ``Box`` is contained but not strictly
      contained.

    .. cpp:function:: bool contains (const Box& b) const
                      bool strictly_contains (const Box& b) const
                      
      Returns true if the argument ``Box`` is contained or strictly
      contained within this ``Box``.  By "strictly", it means the two
      ``Box``\ es do not share borders.  It's a runtime error if the
      two ``Box`` es have different types.

    .. cpp:function:: bool intersects (const Box& b) const

      Return true if ``Box``\ es intersect.  It's a runtime error if
      the two ``Box`` es have different types.  An empty ``Box`` does
      not intersect with any ``Box`` \ es.

    .. cpp:function:: bool sameSize (const Box& b) const

      Returns true if ``Box``\ es have the same size.  Note that they
      do not need to be identical.  It's a runtime error if the two
      ``Box`` es have different types.

    .. cpp:function:: bool sameType (const Box &b) const

      Returns true if ``Box``\ es have the same type. 

    .. cpp:function:: bool operator== (const Box& rhs) const
                      bool operator!= (const Box& rhs) const

      Returns true if ``Box``\ es are identical (including type) or
      differ (including type). 

.. seealso::

  :c:macro:`BL_SPACEDIM`; :cpp:class:`IntVect`; \
     :cpp:class:`IndexType`; :cpp:class:`Orientation`; :cpp:class:`BoxArray`
